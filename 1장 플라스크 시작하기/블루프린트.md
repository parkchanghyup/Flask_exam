# 블루프린트

블루프린트는 대규모 애플리케이션 구현에 필요한 중요한 클래스이다.  
블루프린트란 쉽게 말해 공통 URL에 대해서 조직적으로 묶어 관리해주는 클래스이다.  
별도의 정적파일과 템플릿을 정의할 수 있으며 공통 URL에 대해서 url_prefix 인자로 관리한다.  
예를 들어 API를 작성한다고 가정해보면, 기종 방식으로 코딩한다하면 한 파일에 모든 라우터가 등록되어야 한다.  
매번 API버전이 늘어날 때마다 추가하는 방식은 매우 비효율적이다. 이때 블루프린트를 사용해서 분리할 수 있다.

---
flask/  
|----hello.py  
|----v2.py  
|----v1.py   

---  

```python
#hello.py
from flask import Flask

app = Flask(__name__)

@app.route('/v1/users')
def v1_users():
    return 'v1'

@app.route('/v2/users')
def v2_users():
    return 'v2'
```
---
```python
#v1.py
from flask import Blueprint

app = Blueprint('v1', __name__, url_prefix ='\v1')

@app.route('\users')
def users():
    return 'v2'
```
```python
# v2.py
from flask import Blueprint

app = Blueprint('v2', __name__, url_prefix='/v2')

@app.route('/users')
def user():
    return 'v2'
```
```python
# hello.py
from flask import Flask
from v1 import app as v1_app
from v2 import app as v2_app

app = Flask(__name__)
app.register_blueprint(v1_app)
app.register_blueprint(v2_app)
```
블루프린트 클래스는 여러 인자를 받는데 첫 번째 인자는 url_for에서 해당 앱을 찾기 위한 키워드로 사용된다. 

```python
app = Blueprint('v1', __name__, url_prefix = '/v1')
```
만약 /v1/users URL을 얻고 싶다면 다음과 같이 접근 할 수 있다.
```python
url_for('v1.users')
```

두 번째 인자는 정적 파일과 템플릿 위치를 추적하기 위해 사용된다.   
세 번째 인자는 해당 앱의 공통 URL을 인자로 받는다. /v1/users. /v1/users/<int:user_id> 등 /v1이 공통적으로 들어가 있다.  
이때 url_prefix로 /v1을 등록하게 된다면 해당 앱은 모두 공통적으로 /v1 URL이 들어간다.  

@app.route에는 /users로 시작하지만 블루프린트 때문에 공통적으로 /v1 URL이 포함된다.

```python
# v1.py
from flask import Blueprint

app = Blueprint('v1', __name__, url_prefix = '/v1')

@app.route('/users')
def users():
    return 'v1'
@app.route('/users/<int:user_id>')
def get_user(user_id):
    return str(user_id)
```